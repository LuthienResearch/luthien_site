---
layout: base.njk
---

<a href="{{ '/updates/' | url }}" class="title-link"><h1>LUTHIEN</h1></a>
<a href="{{ site.githubUrl }}" target="_blank" class="tagline-link"><div class="tagline">{{ site.description }}</div></a>
<div class="homepage-buttons">
    <div class="all-badges">
        <a href="{{ site.githubUrl }}" target="_blank" class="shields-badge main-badge">
            <span class="badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
                </svg>
            </span>
            <span class="badge-right">Luthien Proxy</span>
        </a>
        <a href="{{ '/updates/' | url }}" class="shields-badge updates-badge">
            <span class="badge-left updates-badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M13.5 2c-5.621 0-10.211 4.443-10.475 10h-3.025l5 6.625 5-6.625h-2.975c.257-3.351 3.06-6 6.475-6 3.584 0 6.5 2.916 6.5 6.5s-2.916 6.5-6.5 6.5c-1.863 0-3.542-.793-4.728-2.053l-2.427 3.216c1.877 1.754 4.389 2.837 7.155 2.837 5.79 0 10.5-4.71 10.5-10.5s-4.71-10.5-10.5-10.5z"/>
                </svg>
            </span>
            <span class="badge-right updates-badge-right">Updates</span>
        </a>
        <a href="mailto:{{ site.contactEmail }}" class="shields-badge contact-badge">
            <span class="badge-left contact-badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z"/>
                </svg>
            </span>
            <span class="badge-right contact-badge-right">Contact</span>
        </a>
        <a href="{{ site.donationUrl }}" target="_blank" class="shields-badge donate-badge">
            <span class="badge-left donate-badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4 14.083c0-2.145-2.232-2.742-3.943-3.546-1.039-.54-.908-1.829.581-1.916.826-.05 1.675.195 2.443.465l.362-1.647c-.907-.276-1.719-.402-2.443-.421v-1.018h-1v1.067c-1.945.267-2.542 1.178-2.542 2.433 0 2.099 2.406 2.491 3.488 3.017 1.085.526 1.058 1.667 0 2.297-1.067.615-3.137.543-4.466-.059l-.473 1.694c1.175.328 2.258.493 3.128.52v1.031h1v-1.094c1.892-.115 3.865-.958 3.865-2.823z"/>
                </svg>
            </span>
            <span class="badge-right donate-badge-right">Donate</span>
        </a>
    </div>
</div>

<div class="content">
    <h2>Try the Luthien Proxy Alpha</h2>
    <p>
        The Luthien Proxy is now available in alpha. It's an OpenAI-compatible LLM proxy that brings
        Redwood-style AI Control to production agentic deployments.
    </p>

    <p>
        <strong>Prerequisites:</strong> Docker, Python 3.13+, and <code>uv</code> package manager
    </p>

    <p>
        Get started in minutes:
    </p>

    <div class="quickstart">
        <pre><code># Clone the repository
git clone https://github.com/luthienresearch/luthien-proxy.git
cd luthien-proxy

# Configure environment
cp .env.example .env
# Edit .env and add your API keys:
# - OPENAI_API_KEY
# - ANTHROPIC_API_KEY

# Start the proxy
./scripts/quick_start.sh

# Test it works
./scripts/test_v2_gateway.sh

# Launch Claude Code or Codex with the proxy
./scripts/launch_claude_code.sh
# or
./scripts/launch_codex.sh</code></pre>
    </div>

    <p>
        <a href="{{ site.githubUrl }}" target="_blank" class="cta-button">View on GitHub â†’</a>
    </p>

    <p>
        The proxy provides policy orchestration, decision logic, and full observability for your AI systems.
        <a href="{{ '/about/' | url }}" class="inline-link">Learn more about our approach</a>.
    </p>

    <h3>Custom Policies</h3>
    <p>
        The proxy gives you complete control over requests and responses in-flight. Implement custom policies
        to monitor, modify, block, or enhance any aspect of LLM interactions. Write policies in Python to:
        inspect prompts, transform completions, enforce safety constraints, log interactions, or integrate
        with external systems.
    </p>
    <p>
        Create your policy class in <code>src/luthien_proxy/v2/policies/my_policy.py</code>:
    </p>
    <div class="quickstart">
        <pre><code>from luthien_proxy.v2.streaming.event_based_policy import EventBasedPolicy
from luthien_proxy.v2.policies.context import PolicyContext

class MyPolicy(EventBasedPolicy):
    async def on_request(self, request, context: PolicyContext):
        # Inspect or modify requests
        context.emit("policy.request", "Processing request")
        return request

    async def on_response(self, response, context: PolicyContext):
        # Inspect or modify non-streaming responses
        context.emit("policy.response", "Processing response")
        return response

    async def on_stream_start(self, context: PolicyContext, streaming_ctx):
        # Initialize streaming state
        context.scratchpad["chunks_processed"] = 0

    async def on_content_delta(self, raw_chunk, block, context, streaming_ctx):
        # Process content chunks as they arrive
        context.scratchpad["chunks_processed"] += 1
        # Default: forward immediately (inherited behavior)
        await streaming_ctx.send_chunk(raw_chunk)

    async def on_content_complete(self, block, context, streaming_ctx):
        # Called when a complete content block finishes
        content_text = block.content
        context.emit("policy.content_done", f"Received {len(content_text)} chars")

    async def on_tool_call_complete(self, block, context, streaming_ctx):
        # Called when a complete tool call finishes buffering
        tool_name = block.name
        tool_args = block.arguments
        context.emit("policy.tool_call", f"Tool: {tool_name}")
        # Decide whether to forward, block, or modify the tool call
        if streaming_ctx.is_output_finished():
            return  # Already blocked by previous policy decision
        await streaming_ctx.send_chunk(block.to_chunk())</code></pre>
    </div>
    <p>
        <strong>Key concepts:</strong>
    </p>
    <ul>
        <li><code>context</code> persists across all hook calls for a single request</li>
        <li>Events trigger serially (in order) as each chunk arrives from the LLM</li>
        <li>Use <code>on_content_complete</code> and <code>on_tool_call_complete</code> to inspect fully-buffered blocks</li>
        <li><code>context.scratchpad</code> stores mutable state that persists across hooks</li>
        <li><code>streaming_ctx.is_output_finished()</code> checks if a previous hook has already blocked the response</li>
    </ul>
    <p>
        Then configure it in <code>config/v2_config.yaml</code>:
    </p>
    <div class="quickstart">
        <pre><code>policy:
  class: "luthien_proxy.v2.policies.my_policy:MyPolicy"
  config:
    your_setting: value</code></pre>
    </div>
    <p>
        See
        <a href="{{ site.githubUrl }}/blob/main/src/luthien_proxy/v2/policies/event_based_noop.py" target="_blank" class="inline-link">event_based_noop.py</a>
        for a minimal pass-through example, or
        <a href="{{ site.githubUrl }}/blob/main/src/luthien_proxy/v2/policies/tool_call_judge_v3.py" target="_blank" class="inline-link">tool_call_judge_v3.py</a>
        for a more realistic example that uses a local LLM to evaluate the safety of tool invocations before they reach your machine.
    </p>

    <h3>Early Development</h3>
    <p>
        Luthien Proxy is in active development and subject to rapid change. We encourage you to
        <a href="{{ site.githubUrl }}" target="_blank" class="inline-link">star the repository</a> to follow updates
        and <a href="{{ site.githubUrl }}/issues" target="_blank" class="inline-link">open issues</a> for bugs,
        feature requests, or questions. Your feedback helps shape the future of production AI Control.
    </p>
</div>