---
layout: base.njk
---

<a href="{{ '/updates/' | url }}" class="title-link"><h1>LUTHIEN</h1></a>
<a href="{{ site.githubUrl }}" target="_blank" class="tagline-link"><div class="tagline">{{ site.description }}</div></a>
<div class="homepage-buttons">
    <div class="all-badges">
        <a href="{{ site.githubUrl }}" target="_blank" class="shields-badge main-badge">
            <span class="badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12z"/>
                </svg>
            </span>
            <span class="badge-right">Luthien Proxy</span>
        </a>
        <a href="{{ '/updates/' | url }}" class="shields-badge updates-badge">
            <span class="badge-left updates-badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M13.5 2c-5.621 0-10.211 4.443-10.475 10h-3.025l5 6.625 5-6.625h-2.975c.257-3.351 3.06-6 6.475-6 3.584 0 6.5 2.916 6.5 6.5s-2.916 6.5-6.5 6.5c-1.863 0-3.542-.793-4.728-2.053l-2.427 3.216c1.877 1.754 4.389 2.837 7.155 2.837 5.79 0 10.5-4.71 10.5-10.5s-4.71-10.5-10.5-10.5z"/>
                </svg>
            </span>
            <span class="badge-right updates-badge-right">Updates</span>
        </a>
        <a href="mailto:{{ site.contactEmail }}" class="shields-badge contact-badge">
            <span class="badge-left contact-badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M12 12.713l-11.985-9.713h23.97l-11.985 9.713zm0 2.574l-12-9.725v15.438h24v-15.438l-12 9.725z"/>
                </svg>
            </span>
            <span class="badge-right contact-badge-right">Contact</span>
        </a>
        <a href="{{ site.donationUrl }}" target="_blank" class="shields-badge donate-badge">
            <span class="badge-left donate-badge-left">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="shield-icon">
                    <path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4 14.083c0-2.145-2.232-2.742-3.943-3.546-1.039-.54-.908-1.829.581-1.916.826-.05 1.675.195 2.443.465l.362-1.647c-.907-.276-1.719-.402-2.443-.421v-1.018h-1v1.067c-1.945.267-2.542 1.178-2.542 2.433 0 2.099 2.406 2.491 3.488 3.017 1.085.526 1.058 1.667 0 2.297-1.067.615-3.137.543-4.466-.059l-.473 1.694c1.175.328 2.258.493 3.128.52v1.031h1v-1.094c1.892-.115 3.865-.958 3.865-2.823z"/>
                </svg>
            </span>
            <span class="badge-right donate-badge-right">Donate</span>
        </a>
    </div>
</div>

<div class="content">
    <h2>Try the Luthien Proxy Alpha</h2>
    <p>
        The Luthien Proxy is now available in alpha. It's a Claude Code and OpenAI Codex CLI compatible LLM proxy that brings
        Redwood-style AI Control to production agentic deployments.
    </p>

    <p>
        <a href="{{ site.githubUrl }}" target="_blank" class="cta-button">View on GitHub →</a>
    </p>

    <p>
        <strong>Prerequisites:</strong> Docker, Python 3.13+, and <code>uv</code> package manager
    </p>

    <p>
        Get started in minutes:
    </p>

    <div class="quickstart">
        <pre><code># Clone and configure
git clone https://github.com/LuthienResearch/luthien-proxy
cd luthien-proxy
cp .env.example .env
# Add OPENAI_API_KEY and ANTHROPIC_API_KEY to .env

# Start the proxy
./scripts/quick_start.sh

# Test it works
./scripts/test_gateway.sh

# Launch Claude Code or Codex with the proxy
./scripts/launch_claude_code.sh
# or
./scripts/launch_codex.sh</code></pre>
    </div>

    <h3>Verify Everything is Working</h3>
    <p>
        Once the proxy is running, navigate to <a href="http://localhost:8000/activity/monitor" target="_blank" class="inline-link">http://localhost:8000/activity/monitor</a>
        to see the activity monitor. This real-time dashboard shows all requests flowing through the proxy,
        policy decisions, and detailed event streams. As you interact with Claude Code or Codex, you'll see
        requests, policy events, and responses appear in the monitor.
    </p>

    <p>
        You can also visit <a href="http://localhost:8000/policy-config" target="_blank" class="inline-link">http://localhost:8000/policy-config</a>
        to switch between policies without restarting the proxy. Changes take effect immediately.
    </p>

    <p>
        The proxy provides policy orchestration, decision logic, and full observability for your AI systems.
        The proxy gives you complete control over requests and responses in-flight.
    </p>

    <h3>Policies</h3>
    <p>
        Policies let you monitor, modify, block, or enhance any aspect of LLM interactions. For most use cases, we recommend using
        <code>SimpleJudgePolicy</code>, which provides a declarative rules-based interface with automatic LLM judge logic.
    </p>

    <h4>Switch Policies at Runtime</h4>
    <p>
        The easiest way to try different policies is through the web UI at
        <a href="http://localhost:8000/policy-config" target="_blank" class="inline-link">localhost:8000/policy-config</a>.
        Browse available policies, select one to activate, and changes take effect immediately—no restart required.
    </p>
    <p>
        You can also use the Admin API to switch policies programmatically. This is especially useful for
        live-updating policies from within a Claude Code session:
    </p>
    <div class="quickstart">
        <pre><code># Get current active policy
curl http://localhost:8000/admin/policy/current \
  -H "Authorization: Bearer admin-dev-key"

# List available policy classes
curl http://localhost:8000/admin/policy/list \
  -H "Authorization: Bearer admin-dev-key"

# Create and activate a new policy instance
curl -X POST http://localhost:8000/admin/policy/create \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer admin-dev-key" \
  -d '{
    "name": "my-judge-policy",
    "policy_class_ref": "luthien_proxy.policies.tool_call_judge_v3:ToolCallJudgeV3Policy",
    "config": {
      "model": "openai/gpt-4o-mini",
      "probability_threshold": 0.99
    }
  }'

curl -X POST http://localhost:8000/admin/policy/activate \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer admin-dev-key" \
  -d '{"name": "my-judge-policy"}'</code></pre>
    </div>
    <p>
        Watch the activity monitor at
        <a href="http://localhost:8000/activity/monitor" target="_blank" class="inline-link">localhost:8000/activity/monitor</a>
        to see policy events as requests flow through.
    </p>

    <h4>Implement Your Own Policy</h4>
    <p>
        Create your policy class in <code>src/luthien_proxy/policies/my_policy.py</code>:
    </p>
    <div class="quickstart">
        <pre><code>from luthien_proxy.policies.simple_judge_policy import SimpleJudgePolicy

class MyPolicy(SimpleJudgePolicy):
    """Block dangerous commands before they execute."""

    RULES = [
        "Never allow 'rm -rf' commands",
        "Block requests to delete production data",
        "Prevent executing untrusted code"
    ]</code></pre>
    </div>
    <p>
        <strong>Key concepts:</strong>
    </p>
    <ul>
        <li><code>SimpleJudgePolicy</code> handles LLM judge logic automatically for requests, responses, and tool calls</li>
        <li>Define your safety rules declaratively in the <code>RULES</code> list</li>
        <li>The framework evaluates each rule against incoming requests and tool calls</li>
        <li>Dangerous operations are blocked before they can execute</li>
    </ul>
    <p>
        See the available policies in <code>src/luthien_proxy/policies/</code>:
    </p>
    <ul>
        <li><a href="{{ site.githubUrl }}/blob/main/src/luthien_proxy/policies/noop.py" target="_blank" class="inline-link">noop.py</a> — Pass-through filtering</li>
        <li><a href="{{ site.githubUrl }}/blob/main/src/luthien_proxy/policies/uppercase_nth_word.py" target="_blank" class="inline-link">uppercase_nth_word.py</a> — Transformation example</li>
        <li><a href="{{ site.githubUrl }}/blob/main/src/luthien_proxy/policies/tool_call_judge_v3.py" target="_blank" class="inline-link">tool_call_judge_v3.py</a> — AI-based safety evaluation</li>
    </ul>

    <h4>Advanced: AI-Supervised Tool Calls</h4>
    <p>
        For production deployments requiring stronger safety guarantees, the
        <a href="{{ site.githubUrl }}/blob/main/src/luthien_proxy/policies/tool_call_judge_v3.py" target="_blank" class="inline-link">tool_call_judge_v3.py</a>
        policy demonstrates advanced streaming capabilities and local LLM review. It intercepts tool calls as they arrive,
        sends them to a local language model for safety evaluation, and blocks dangerous operations before they execute.
        This approach combines the speed of streaming with the intelligence of AI-powered decision-making, enabling
        real-time protection without sacrificing responsiveness.
    </p>

    <h3>Early Development</h3>
    <p>
        Luthien Proxy is in active development and subject to rapid change. We encourage you to
        <a href="{{ site.githubUrl }}" target="_blank" class="inline-link">star the repository</a> to follow updates
        and <a href="{{ site.githubUrl }}/issues" target="_blank" class="inline-link">open issues</a> for bugs,
        feature requests, or questions. Your feedback helps shape the future of production AI Control.
    </p>
</div>